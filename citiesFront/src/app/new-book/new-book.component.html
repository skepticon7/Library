<app-navbar></app-navbar>
<div class="mx-56 py-10 flex flex-col">
  <h2 class="poppins-bold text-2xl">New Book</h2>
  <form (ngSubmit)="handleNewBook()" [formGroup]="newBookForm" class="flex flex-col gap-5 max-w-60 self-center">
      <div class="flex flex-col gap-1">
        <input class="border-2 border-black border-opacity-70 rounded-md px-2 text-sm py-2" placeholder="Book title" type="text" formControlName="title">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('title')?.invalid && newBookForm.get('title')?.touched">title is empty</span>
      </div>
      <div class="flex flex-col gap-1">
        <input class="border-2 border-black border-opacity-70 rounded-md px-2 text-sm py-2" placeholder="Book Author" type="text" formControlName="author">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('author')?.invalid && newBookForm.get('author')?.touched">author is empty</span>
      </div>
      <div class="flex flex-col gap-1">
        <input class="border-2 border-black border-opacity-70 rounded-md px-2 text-sm py-2" placeholder="Book publisher" type="text" formControlName="publisher">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('publisher')?.invalid && newBookForm.get('publisher')?.touched">publisher is empty</span>
      </div>
      <div class="flex flex-col gap-1">
        <textarea class="rounded-md border-2 border-black px-2 py-2 text-sm border-opacity-70" type="text" placeholder="Book Description"  formControlName="description"></textarea>
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('description')?.invalid && newBookForm.get('description')?.touched">
               {{ newBookForm.get('description')?.hasError('minlength') ? 'Minimum length is: ' + newBookForm.get('description')?.errors?.['minlength']?.['requiredLength'] : '' }}
              {{ newBookForm.get('description')?.hasError('maxlength') ? 'Maximum length is: ' + newBookForm.get('description')?.errors?.['maxlength']?.['requiredLength'] : '' }}
              {{ newBookForm.get('description')?.hasError('required') ? 'description is empty' : null }}
        </span>
      </div>
      <div class="flex flex-col gap-1">
        <input class="border-2 border-black border-opacity-70 rounded-md px-2 text-sm py-2" placeholder="Book pages" type="number" formControlName="pages">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('pages')?.invalid && newBookForm.get('pages')?.touched">pages is empty</span>
      </div>
      <div class="flex flex-col gap-1" formGroupName="yearEra">
        <div class="flex gap-2 w-full">
          <input class="rounded-md border-2 border-black px-2 py-2 text-sm border-opacity-70 w-2/3" placeholder="Book year" type="number"  formControlName="year">
          <select class="border-2 border-black rounded-md w-1/3" formControlName="era">
            <option value="BCE">BCE</option>
            <option value="CE">CE</option>
          </select>
        </div>
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('yearEra')?.errors?.['yearRange'] && newBookForm.get('yearEra')?.touched" >
              {{ newBookForm.get('yearEra')?.errors?.['yearRange'] }}
        </span>
      </div>
      <div class="flex flex-col gap-1">
        <input class="border-2 border-black border-opacity-70 rounded-md px-2 text-sm py-2" placeholder="Book copies" type="number" formControlName="copies">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('copies')?.invalid && newBookForm.get('copies')?.touched">copies is empty</span>
      </div>
    <div class="flex flex-col gap-3" formGroupName="price">
      <label class="poppins-semibold">session pricing :</label>
      <div class="flex gap-2 w-full">
        <input class="rounded-md border-2 border-black px-2 py-2 text-sm border-opacity-70 w-1/3" placeholder="30 Min" type="number"  formControlName="halfPrice">
        <input class="rounded-md border-2 border-black px-2 py-2 text-sm border-opacity-70 w-1/3" placeholder="1 Hour" type="number"  formControlName="onePrice">
        <input class="rounded-md border-2 border-black px-2 py-2 text-sm border-opacity-70 w-1/3" placeholder="1H 30Min" type="number"  formControlName="oneHalfPrice">
      </div>
      <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('price')?.errors?.['priceError'] && newBookForm.get('price')?.touched" >
              {{ newBookForm.get('price')?.errors?.['priceError'] }}
      </span>
    </div>
    <div class="flex flex-col gap-3">
      <label class="poppins-semibold">book cover :</label>
      <div class="flex flex-col gap-1">
        <input class="rounded-md border-2 border-black px-2 py-1 text-sm border-opacity-70" accept="/images/*" (change)="handleCoverChange($event)" type="file"  formControlName="cover">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('cover')?.invalid && newBookForm.get('cover')?.touched">cover is empty</span>
      </div>
    </div>
    <div class="flex flex-col gap-3">
      <label class="poppins-semibold">book pdf :</label>
      <div class="flex flex-col gap-1">
        <input class="rounded-md border-2 border-black px-2 py-1 text-sm border-opacity-70" accept="/application/pdf/*" (change)="handleFileChange($event)" type="file"  formControlName="pdf">
        <span class="text-red-600 text-sm poppins-medium" *ngIf="newBookForm.get('pdf')?.invalid && newBookForm.get('pdf')?.touched">pdf is empty</span>
      </div>
    </div>
    <button [disabled]="newBookForm.invalid" class="bg-amber-500 rounded-lg text-white poppins-semibold px-3 py-2">Save</button>
  </form>
</div>



